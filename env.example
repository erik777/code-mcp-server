# MCP Server Configuration
# Copy this file to .env for default settings
# Copy to .env.local for local overrides (takes priority over .env)

# MCP Git Gateway Configuration

# Server Configuration
PORT=3131
REPO_PATH=./repo

# Public Base URL (for OAuth redirects and external access)
# This should match your reverse proxy configuration
BASE_URL=https://www.example.com/reverse/proxypath

# Internal URLs (fallback for testing without reverse proxy)
# These are used when BASE_URL is not defined or for internal communication
MCP_INTERNAL_URL=http://localhost:3131
HYDRA_INTERNAL_URL=http://localhost:4444

# OAuth Provider Configuration
# Supported providers: hydra (default), google, custom
OAUTH_PROVIDER=hydra

# OAuth Client Configuration (used for all providers)
OAUTH_CLIENT_ID=mcp-client
OAUTH_CLIENT_SECRET=mcp-secret

# Google OAuth 2.0 Configuration (only needed if OAUTH_PROVIDER=google)
# Get these from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Hydra Configuration (only needed if OAUTH_PROVIDER=hydra)
# Hydra Admin API URL (used for login/consent flow management)
HYDRA_ADMIN_URL=http://localhost:4445
# Hydra Public API URL (used for OAuth flow)
HYDRA_PUBLIC_URL=http://localhost:4444

# Custom OAuth Provider Configuration (only needed if OAUTH_PROVIDER=custom)
# Define these if you're using a custom OAuth provider
# OAUTH_AUTH_URL=https://your-provider.com/oauth2/auth
# OAUTH_TOKEN_URL=https://your-provider.com/oauth2/token
# OAUTH_USERINFO_URL=https://your-provider.com/oauth2/userinfo
# OAUTH_JWKS_URL=https://your-provider.com/.well-known/jwks.json

# Session Secret (generate a secure random string)
# You can generate one with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
SESSION_SECRET=your-session-secret-here

# Email Domain Restriction
# Only users with email addresses ending with this domain will be allowed access
ALLOWED_EMAIL_DOMAIN=@example.com

# OAuth Scopes (space-separated)
OAUTH_SCOPES=openid profile email

# Example for development:
# REPO_PATH=/home/user/dev/ws
# BASE_URL=https://www.servicecraze.com/corsair/mcp1

# Environment files are loaded in priority order:
# 1. .env.local (highest priority, for local development overrides)
# 2. .env (default settings, can be committed to git)
# 3. Built-in defaults (fallback values in code) 